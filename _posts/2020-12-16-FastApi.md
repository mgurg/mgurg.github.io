---
layout: post
title: "FastApi: podstawy"
categories: Python
author: "Michał"
---


W poszukiwaniu idealnego frameworka webowego.

## Lokalna instalacja

```bash
apt-get install python3-venv
sudo su root

python3 -m venv --copies ve
source ve/bin/activate

python3 -m pip install -U pip setuptools
python3 -m pip list
python3 -m pip install fastapi uvicorn
python3 -m pip install jinja2 python-multipart
```

Plik `main.py` :

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def root():
    return {"message": "Hello World"}
```

Uruchomienie:
```bash
uvicorn main:app --port 5000 --reload
```

W pryzpdku struktury: 
```bash
└── project
    └── app
        ├── __init__.py
        └── main.py
```

uruchomienie odbędzie się komendą:
```bash
uvicorn app.main:app --port 5000 --reload
```


## Połączenie z MySQL

```bash
pipenv install sqlalchemy
pip install mysql-connector-python
```

Do nauki korzystam z MySQL (docker). Uruchomienie:
```bash
sudo docker-compose up -d 
```
Na potrzeby wygenerowania modeli dla SQLAlchemy skorzystałem z [sqlacodegen](https://pypi.org/project/sqlacodegen/):

```bash
sqlacodegen --outfile models.py \
mysql+mysqlconnector://{user_name}:{password}@{host}:{port}/{database_name}?charset=utf8
```


## Struktura dla większego projektu:

```bash
.
├── app/
│   ├── __init__.py
│   ├── main.py
│   ├── config/
│   │   ├── __init__.py
│   │   ├── db.py
│   │   └── settings.py
│   ├── models/
│   │   ├── __init__.py
│   │   ├── clients.py
│   │   └── user.py
│   ├── routers/
│   │   ├── __init__.py
│   │   ├── auth.py
│   │   ├── basic_db_req.py
│   │   ├── registrations.py
│   │   └── www.py
│   ├── schemas/
│   │   ├── __init__.py
│   │   ├── auth.py
│   │   ├── clients.py
│   │   └── users.py
│   ├── services/
│   │   ├── __init__.py
│   │   ├── auth.py
│   │   ├── clients.py
│   │   ├── crud.py
│   │   └── notification.py
│   ├── static/
│   └── templates/
│       ├── 404.html
│       ├── 500.html
│       ├── form.html
│       ├── index.html
│       ├── navbar.html
│       ├── onboarding.html
│       ├── plt/
│       │   ├── plt_mileage.html
│       │   ├── plt_price.html
│       │   └── plt_sca_year.html
│       ├── price.html
│       └── sudoku.html
└── docker-compose.yml
```