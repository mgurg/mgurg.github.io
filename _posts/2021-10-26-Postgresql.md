---
layout: post
title: "PostgreSQL - instalacja"
categories: SQL
author: "Michał"
math: false
---

## Docker
Zawartość pliku `docker-compose.yml`:
```yaml
# docker-compose --env-file pg.env up -d
version: '3.5'
services:
  postgres:
    env_file:
      - pg.env
    container_name: pg_container
    image: postgres:14-bullseye
    environment:
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      PGDATA: /data/postgres
    volumes:
      - postgres:/data/postgres
    ports:
      - '5432:5432'
    networks:
      - postgres
    restart: unless-stopped
networks:
  postgres:
    driver: bridge
volumes:
  postgres:
  pgadmin:
```

Uruchomienie: 
```bash
docker-compose --env-file pg.env up -d
```

#### PGAdmin

```bash
docker run -p 5050:80 -e "PGADMIN_DEFAULT_EMAIL=m@m.com" -e "PGADMIN_DEFAULT_PASSWORD=1234" -d  dpage/pgadmin4
```



### Tworzenie nowej tabeli

```sql
CREATE TABLE users (
    id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    client_id bigint,
    email varchar(128),
    "password" varchar(255),
    auth_token varchar(128),
    auth_token_valid_to timestamptz,
    is_active boolean,
    service_token varchar(100),
    service_token_valid_to timestamptz,
    first_name varchar(100),
    last_name varchar(100),
    user_role_id bigint,
    deleted_at timestamptz,
    created_at timestamptz,
    updated_at timestamptz,
    uuid uuid
);
```



